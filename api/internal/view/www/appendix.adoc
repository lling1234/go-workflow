<<<
[[_APPENDIR_A]]
== 附录A

[[_APPENDIR_A1]]
=== API调用流程说明
		1. 调用http://192.168.1.123/v1/token/?username=admin&password=admin接口登录鉴权
		2. 从登录鉴权接口的返回值中取出Token，后续接口调用时需要在http Request Headers中填充X-Token
		3. 登录保活，间隔30s左右调用http://192.168.1.123/v1/token/更新Token
		4. 调用API功能接口，解析返回值
		
API完整URL路径举例如下：

    http://192.168.1.106/v1/network/?default=false
    http://192.168.1.106/v1/encode/videoFormat?chn=0&default=false

[[_APPENDIR_A2]] 			
=== API返回值说明
接口调用返回采用统一标准结构，返回的json数据包含"Code"、"Message"、"Translate"、"Detail"、"Data"五个字段，实际数据统一封装在"Data"字段中，具体内容可查阅上文对应的接口返回类型。
[options="header", cols=".^0a,.^0a]
|===
|参数|说明
|Code|返回码
|Message|返回码描述
|Translate|返回码提示翻译
|Detail|详细错误信息
|Data|返回数据
|===

=== API返回格式样例
====  成功
[source,json]
----
  {
    "Code": 200,
    "Message": "msg: success",
    "Translate": "操作成功",
    "Detail": "",
    "Data": null
  }
----

==== 失败
[source,json]
----
  {
    "Code": 400000,
    "Message": "msg: operation failed",
    "Translate": "操作失败",
    "Detail": "",
    "Data": null
  }
----

=== 状态码
[options="header", cols=".^0a,.^0a,.^0a"]
|===
|状态码|说明|翻译
|0||接口本身出错，未设置状态码
|200|msg: success|操作成功
|400|msg: bad request|参数错误
|403|msg: forbidden|无访问权限

|200000|msg: success, need to reboot device|操作成功,需要立即重启设备
|200001|msg: success, will auto reboot device|操作成功,设备将自动重启
|400000|msg: operation failed|操作失败
|400001|msg: system exception|系统异常
|400002|msg: upload file failed|上传文件失败
|400003|msg: download file failed|下载文件失败
|400004|msg: need redirect https|重定向到https

|400101|msg: no device found|未搜索到设备
|400102|msg: connect faild|设备连接失败
|400103|msg: no more devices|暂无设备可供获取
|400104|msg: Channel already has camera, add failed|通道已有相机，添加失败

|400200|msg: no authority|无授权文件
|400201|msg: invalid authority|授权文件无效
|400202|msg: get chip id failed|获取芯片ID失败
|400203|msg: Invalid file path|文件路径无效
|400204|msg: file is incomplete|文件不完整

|400300|msg: get config faild|获取配置失败
|400301|msg: set config faild|设置配置失败
|400302|msg: get default config faild|获取默认配置失败
|400303|msg: test config failed|测试配置失败

|400401|msg: get capability faild|获取能力集失败
|400402|msg: no capability|设备不具有该项能力
|400403|msg: over capability|设备超出最大能力限制

|400501|msg: data search failed|数据查询失败
|400502|msg: data insert failed|数据添加失败
|400503|msg: data update failed|数据更新失败
|400504|msg: data delete failed|数据删除失败
|400505|msg: data already exists|数据已存在,不能重复添加

|400601|msg: unrecognized picture|图片无法识别
|400602|msg: failed to recognize picture|图片识别失败
|400603|msg: no object recognize|未识别出目标
|400604|msg: no similar object|无相似目标

|400701|msg: the token is invalid|Token失效
|400702|msg: user password error|用户密码错误
|400703|msg: The number of user logins exceeded the limit|用户登录数量超出限制
|400704|msg: the user does not exist|用户不存在
|400705|msg: the user group does not exist|用户组不存在
|400724|msg: current account restriction to blacklist|当前账户限制为黑名单
|400725|msg: the current account is locked|当前账户已被锁定

|400801|msg: the current account is locked|当前账户已被锁定
|400802|msg: the current account is locked|当前账户已被锁定
|400803|msg: the current account is locked|当前账户已被锁定
|400804|msg: the current account is locked|当前账户已被锁定

|===

<<<
[[_APPENDIR_B]]
== 附录B

[[_APPENDIR_B1]]
=== 其它说明
